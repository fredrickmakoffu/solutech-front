{"remainingRequest":"/home/october/Documents/code/kipekee-front/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/october/Documents/code/kipekee-front/src/components/Custom/ImagesModal.vue?vue&type=style&index=0&id=16e386f7&lang=scss&scoped=true","dependencies":[{"path":"/home/october/Documents/code/kipekee-front/src/components/Custom/ImagesModal.vue","mtime":1640772100778},{"path":"/home/october/Documents/code/kipekee-front/node_modules/css-loader/dist/cjs.js","mtime":1630502847564},{"path":"/home/october/Documents/code/kipekee-front/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1616796459000},{"path":"/home/october/Documents/code/kipekee-front/node_modules/postcss-loader/src/index.js","mtime":1630502853892},{"path":"/home/october/Documents/code/kipekee-front/node_modules/sass-loader/dist/cjs.js","mtime":1630502879448},{"path":"/home/october/Documents/code/kipekee-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/october/Documents/code/kipekee-front/node_modules/vue-loader-v16/dist/index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgICBAaW1wb3J0ICcuLi8uLi9hc3NldHMvc2Nzcy9sYXlvdXQvX2Zvcm0uc2Nzcyc7Cg=="},{"version":3,"sources":["/home/october/Documents/code/kipekee-front/src/components/Custom/ImagesModal.vue"],"names":[],"mappings":";IAoFI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC","file":"/home/october/Documents/code/kipekee-front/src/components/Custom/ImagesModal.vue","sourceRoot":"","sourcesContent":["<template>\n        <!-- Modal -->\n    <div class=\"modal fade\" id=\"images\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"imagesLabel\" aria-hidden=\"true\">\n        <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\" role=\"document\">\n            <div class=\"modal-content\" style=\"overflow-y: scroll\">\n                <div class=\"modal-header pb-0\">\n                    <span class=\"d-block\">\n                        <h5 class=\"content-title-min\">Images</h5>\n                        <p class=\"text-muted\">Upload Image Details</p>\n                    </span>\n                </div>\n\n                <form action=\"#\" @submit.prevent=\"handleSubmit()\" enctype=\"multipart/form-data\">\n\n                    <status v-model:status_data=status_data></status>\n                    \n                    <span v-if=\"screen == 1\">\n                        <div class=\"modal-body pt-0\">\n                            <div class=\"form-row mt-3\">\n                                <label for=\"image\" class=\"fw-bold mb-2\">Property Images</label>\n\n                                <div class=\"input-group\">                     \n                                    <input id=\"image\" type=\"file\" class=\"form-control\" required @change=\"imageEvent($event)\">\n                                </div>\n                                \n                                <small>Upload Image</small>\n                            </div>\n\n                            <div class=\"form-row mt-3\">\n                                <label for=\"address\" class=\"fw-bold mb-2\">Caption</label> \n                                <div class=\"input-group\">\n                                    <input v-model=\"form_data.caption\" id=\"name\" type=\"text\" class=\"form-control\" placeholder=\"Label Image Name.\" required>\n                                </div>\n                            </div>\n\n                            <div class=\"form-row mt-4 d-flex\">\n                                <button type=\"submit\" class=\"btn btn-dark text-white w-75 me-2\">\n                                    Save\n                                </button>  \n\n                                <button type=\"button\" class=\"btn btn-secondary w-25\" @click=\"changeScreen(2)\">\n                                    Next <font-awesome-icon class=\"ms-2\" :icon=\"['fas', 'angle-right']\"></font-awesome-icon>\n                                </button>\n                            </div>\n                        </div> \n                    </span> \n\n                    <span v-if=\"screen == 2\">\n                        <div class=\"modal-body pt-0\">\n                            <div class=\"row\">\n                                <div class=\"col-md-6 col-sm-12 mb-4\" v-for=\"({image_url, caption}, index) in property.images\" :key=\"index\">\n                                    <img :src=\"'http://localhost:8000/' + image_url\" :alt=\"caption\" class=\"img-fluid rounded\">\n                                    <div class=\"d-flex mt-2\">\n                                        <button  v-if=\"image_url != property.image_url\"  class=\"btn btn-sm burgundy w-50 me-2\" @click=\"deleteImage(id)\">\n                                            Delete <font-awesome-icon class=\"ms-2\" :icon=\"['fas', 'trash-alt']\"></font-awesome-icon>\n                                        </button>\n\n                                        <button v-if=\"image_url != property.image_url\" class=\"btn btn-sm btn-dark w-50\" @click=\"mainImage(image_url)\">Set to Main Image</button>\n\n                                        <button  v-if=\"image_url == property.image_url\"  class=\"btn btn-sm burgundy w-75 me-2\" @click=\"deleteImage(id)\">\n                                            Delete <font-awesome-icon class=\"ms-2\" :icon=\"['fas', 'trash-alt']\"></font-awesome-icon>\n                                        </button>\n\n                                        <button v-if=\"image_url == property.image_url\" class=\"btn btn-sm btn-success w-25\" @click=\"mainImage(image_url)\">\n                                            <font-awesome-icon class=\"ms-2\" :icon=\"['fas', 'star']\"></font-awesome-icon>\n                                        </button>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class=\"form-row mt-4 d-flex\">\n                                <button type=\"button\" class=\"btn btn-secondary w-25\" @click=\"changeScreen(1)\">\n                                    <font-awesome-icon class=\"me-2\" :icon=\"['fas', 'angle-left']\"></font-awesome-icon> Previous\n                                </button> \n                            </div>                            \n                        </div> \n                    </span>                                  \n                </form>\n            </div>\n        </div>\n    </div>\n</template>\n\n<style lang=\"scss\" scoped>\n    @import '../../assets/scss/layout/_form.scss';\n</style>\n\n<script>\nimport Status from '../../components/Status';\n\nexport default {\n    name: 'ImagesModal',    \n    components: {\n        Status\n    },\n    data() {\n        return {\n            property: [],\n            form_data: {\n                caption: null,\n                image_url: null,\n                property_id: this.property_id\n            },            \n            status_data: {\n                \"success\": false,\n                \"success_message\": 'Form Submission was successful!',\n                \"error\": false,\n                \"error_message\": 'There are some errors.',\n                \"loading\": false\n            },\n            screen: 1\n        }\n    },\n    computed: {\n        modal_list () {\n            return this.$store.state.modal_list\n        }\n    },     \n    watch: {\n        modal_list: function() {\n            if(Object.keys(this.$store.state.modal_list).length > 0) {\n                this.property = {\n                    name: this.$store.state.modal_list.name,\n                    description: this.$store.state.modal_list.description,\n                    address: this.$store.state.modal_list.address,\n                    price: this.$store.state.modal_list.price,\n                    floor_area: this.$store.state.modal_list.floor_area,\n                    bedrooms: this.$store.state.modal_list.bedrooms,\n                    bathrooms: this.$store.state.modal_list.bathrooms,\n                    featured: this.$store.state.modal_list.featured,\n                    type: this.$store.state.modal_list.type,\n                    sale_type: this.$store.state.modal_list.sale_type,\n                    id: this.$store.state.modal_list.id,\n                    images: this.$store.state.modal_list.property_images,\n                    image_url: this.$store.state.modal_list.image_url\n                }\n            } else {\n                this.property = this.$store.state.modal_list\n            }\n        }\n    },    \n    methods: {\n        changeScreen(value) {\n            this.screen = value\n        },\n        imageEvent(event) {\n            this.form_data.image_url = event\n        },\n        handleSubmit() {\n            this.status_data.loading = true\n            let data = new FormData();\n\n            data.append('image_url', this.form_data.image_url.target.files[0])\n            data.append('caption', this.form_data.caption)\n            data.append('property_id', this.property.id)\n\n            this.axios.post('api/photos/property', data).then((response) => {\n                this.status_data.loading = false\n                this.status_data.success = true\n                this.status_data.error = false\n                this.status_data.success_message = response.data.message\n\n                setTimeout(() => {\n                    this.status_data.success = false\n                }, 1000);\n            }).catch((error) => {\n                this.status_data.loading = false\n                this.status_data.success = false\n                this.status_data.error = true\n                this.status_data.error_message = error\n            })            \n        },\n        deleteImage(value) {\n            this.axios.delete('api/photos/property/' + value).then((response) => {\n                this.status_data.loading = false\n                this.status_data.success = true\n                this.status_data.error = false\n                this.status_data.success_message = response.data.message\n\n                setTimeout(() => {\n                    this.status_data.success = false\n                }, 1000);\n            }).catch((error) => {\n                this.status_data.loading = false\n                this.status_data.error = true\n                this.status_data.success = false\n                this.status_data.error_message = error\n            })             \n        },\n        mainImage(image_url) {\n            let data = {\n                image_url: image_url\n            }\n\n            this.axios.put('api/property/' + this.property.id, data).then((response) => {\n                this.status_data.loading = false\n                this.status_data.success = true\n                this.status_data.error = false\n                this.status_data.success_message = response\n\n                setTimeout(() => {\n                    this.status_data.success = false\n                }, 1000);\n            }).catch((error) => {\n                this.status_data.loading = false\n                this.status_data.error = true\n                this.status_data.success = false\n                this.status_data.error_message = error\n            })             \n        }            \n    }\n}\n</script>"]}]}